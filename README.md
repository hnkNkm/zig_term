# ZTerm - Zig ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿

Zig ã¨ ncurses ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ãŸè»½é‡ãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã§ã™ã€‚Docker ç’°å¢ƒã§ã®é–‹ç™ºã«æœ€é©åŒ–ã•ã‚Œã¦ãŠã‚Šã€zsh/bash ã®ã‚ˆã†ãªåŸºæœ¬çš„ãªã‚·ã‚§ãƒ«æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚

## ç‰¹å¾´

- ğŸš€ **é«˜æ€§èƒ½**: Zig ã§å®Ÿè£…ã•ã‚ŒãŸé«˜é€Ÿãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
- ğŸ³ **Docker å¯¾å¿œ**: å®Œå…¨ã«ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸé–‹ç™ºç’°å¢ƒ
- ğŸ“š **æœ€æ–°æŠ€è¡“**: Zig 0.12.0 ã¨æœ€æ–°ã® Ubuntu 22.04 LTS ãƒ™ãƒ¼ã‚¹
- ğŸ¯ **è»½é‡**: æœ€å°é™ã®ä¾å­˜é–¢ä¿‚ã§åŠ¹ç‡çš„ãªå‹•ä½œ
- ğŸ”§ **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½**: æ‹¡å¼µã—ã‚„ã™ã„ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ

## æ©Ÿèƒ½

### å†…è”µã‚³ãƒãƒ³ãƒ‰

- `cd [dir]` - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¤‰æ›´
- `pwd` - ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¡¨ç¤º
- `ls [dir]` - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å†…å®¹ã‚’è¡¨ç¤º
- `echo [text]` - ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡¨ç¤º
- `help` - ãƒ˜ãƒ«ãƒ—ã‚’è¡¨ç¤º
- `exit` - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’çµ‚äº†

### ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰

- `Ctrl+C`, `Ctrl+D`, `ESC` - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«çµ‚äº†
- `â†‘/â†“` - ã‚³ãƒãƒ³ãƒ‰å±¥æ­´ã®é–²è¦§
- `â†/â†’` - ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
- `Backspace` - æ–‡å­—å‰Šé™¤

### å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰

- ã‚·ã‚¹ãƒ†ãƒ ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸä»»æ„ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œå¯èƒ½

## ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- Docker
- Docker Compose
- Git

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone <repository-url>
cd zterm
```

### 2. Docker ç’°å¢ƒã®æ§‹ç¯‰

```bash
# é–‹ç™ºç’°å¢ƒã®èµ·å‹•
docker-compose up -d zterm-dev

# ã‚³ãƒ³ãƒ†ãƒŠã«æ¥ç¶š
docker-compose exec zterm-dev bash
```

### 3. ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ

```bash
# é–‹ç™ºãƒ“ãƒ«ãƒ‰
zig build

# ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
zig build --release=fast

# å®Ÿè¡Œ
zig run src/main.zig

# ã¾ãŸã¯
./zig-out/bin/zterm
```

## Docker ç’°å¢ƒ

### åˆ©ç”¨å¯èƒ½ãªã‚µãƒ¼ãƒ“ã‚¹

#### zterm-dev (é–‹ç™ºç’°å¢ƒ)

- ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªé–‹ç™ºç’°å¢ƒ
- ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ä»˜ã (gdb, valgrind, strace)
- ãƒãƒ¼ãƒˆ 3000 ãŒé–‹æ”¾æ¸ˆã¿

```bash
docker-compose up -d zterm-dev
docker-compose exec zterm-dev bash
```

#### zterm-build (ãƒ“ãƒ«ãƒ‰å°‚ç”¨)

- ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰ç”¨
- æœ€å°é™ã®ç’°å¢ƒ

```bash
docker-compose run --rm zterm-build
```

#### zterm-runtime (å®Ÿè¡Œå°‚ç”¨)

- æœ€å°é™ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ç’°å¢ƒ
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£é‡è¦–

```bash
docker-compose run --rm zterm-runtime
```

## é–‹ç™º

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
zterm/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.zig          # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ terminal.zig      # ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
â”‚   â””â”€â”€ shell.zig         # ã‚·ã‚§ãƒ«æ©Ÿèƒ½
â”œâ”€â”€ build.zig             # ãƒ“ãƒ«ãƒ‰è¨­å®š
â”œâ”€â”€ Dockerfile            # ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸Dockerfile
â”œâ”€â”€ docker-compose.yml    # Docker Composeè¨­å®š
â””â”€â”€ README.md            # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

### ãƒ“ãƒ«ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ“ãƒ«ãƒ‰
zig build debug

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
zig build test

# å®Ÿè¡Œï¼ˆå¼•æ•°ä»˜ãï¼‰
zig build run -- --help
```

### ãƒ‡ãƒãƒƒã‚°

```bash
# gdbã§ã®ãƒ‡ãƒãƒƒã‚°
gdb ./zig-out/bin/zterm

# valgrindã§ã®ãƒ¡ãƒ¢ãƒªãƒã‚§ãƒƒã‚¯
valgrind ./zig-out/bin/zterm

# straceã§ã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«è¿½è·¡
strace ./zig-out/bin/zterm
```

## æ‹¡å¼µ

### æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã®è¿½åŠ 

1. `src/shell.zig`ã®`execute`é–¢æ•°ã«æ–°ã—ã„ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ 
2. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ã‚’å®Ÿè£…
3. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 

### æ–°ã—ã„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¿½åŠ 

1. `src/main.zig`ã®`runMainLoop`é–¢æ•°ã«ã‚­ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’è¿½åŠ 
2. `src/terminal.zig`ã«å¯¾å¿œã™ã‚‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å®Ÿè£…

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ncurses ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# Ubuntu/Debian
apt-get install libncurses5-dev libncursesw5-dev

# Alpine Linux
apk add ncurses-dev

# CentOS/RHEL/Fedora
yum install ncurses-devel
```

#### 2. æ–‡å­—åŒ–ã‘

ç’°å¢ƒå¤‰æ•°`TERM`ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š

```bash
export TERM=xterm-256color
```

#### 3. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼

ä¾å­˜é–¢ä¿‚ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

```bash
# Ubuntu/Debian
apt-get install build-essential libc6-dev
```

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## è²¢çŒ®

1. ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒ•ã‚©ãƒ¼ã‚¯
2. æ©Ÿèƒ½ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ (`feature/amazing-feature`)
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ (`feat: ç´ æ™´ã‚‰ã—ã„æ©Ÿèƒ½ã‚’è¿½åŠ `)
4. ãƒ–ãƒ©ãƒ³ãƒã‚’ãƒ—ãƒƒã‚·ãƒ¥
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ

## é–¢é€£ãƒªãƒ³ã‚¯

- [Zig å…¬å¼ã‚µã‚¤ãƒˆ](https://ziglang.org/)
- [ncurses ãƒ©ã‚¤ãƒ–ãƒ©ãƒª](https://invisible-island.net/ncurses/)
- [Docker å…¬å¼ã‚µã‚¤ãƒˆ](https://www.docker.com/)
